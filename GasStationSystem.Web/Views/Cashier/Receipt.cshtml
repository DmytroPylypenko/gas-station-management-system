@model GasStationSystem.Web.Models.Order
@{
    Layout = null; 
}

<!DOCTYPE html>
<html lang="en">
<head>
    <title>Receipt #@Model.Id</title>
    <style>
        body { font-family: 'Courier New', monospace; width: 300px; margin: 0 auto; padding: 20px; }
        .header { text-align: center; border-bottom: 1px dashed #000; padding-bottom: 10px; margin-bottom: 10px; }
        .item { display: flex; justify-content: space-between; margin-bottom: 5px; }
        .total { border-top: 1px dashed #000; margin-top: 10px; padding-top: 10px; font-weight: bold; display: flex; justify-content: space-between; font-size: 1.2em; }
        .footer { text-align: center; margin-top: 20px; font-size: 0.8em; }
        
        @@media print {
            .no-print { display: none; }
        }
    </style>
</head>
<body>
    <div class="header">
        <h3>GAS STATION SYSTEM</h3>
        <p>Ivano-Frankivsk, Ukraine</p>
        <p>Date: @Model.CreatedAt.ToLocalTime().ToString("g")</p>
        <p>Order #: @Model.Id</p>
    </div>

    <div class="items">
        @foreach (var item in Model.OrderItems)
        {
            <div class="item">
                <span>@item.Product.Name x@(item.Quantity)</span>
                <span>@((item.PriceAtMoment * (decimal)item.Quantity).ToString("C"))</span>
            </div>
        }
    </div>

    <div class="total">
        <span>TOTAL:</span>
        <span>@Model.TotalAmount.ToString("C")</span>
    </div>

    <div class="footer">
        <p>Thank you for choosing us!</p>
        <p>fiscal-check-uuid-@Guid.NewGuid().ToString().Substring(0, 8)</p>
    </div>

    <div class="no-print" style="text-align: center; margin-top: 20px;">
        <button onclick="window.print()" style="padding: 10px 20px; cursor: pointer;">Print Receipt</button>
    </div>

    <script>
        window.onload = function() { window.print(); }
    </script>
</body>
</html>